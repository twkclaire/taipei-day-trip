<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Booking</title>
  <link rel="stylesheet" href="/static/booking.css">
  <link rel="stylesheet" href="/static/signin.css" />
</head>
<body>
  <header>
    <div class="flex-view">
      <a href="/static/index.html" class="left">
        <span class="title">台北一日遊</span>
      </a>
      <div class="right">
          <div class="menu">
            <a class="item" id="booktripItem">預定行程</a>
            <a class="item hidden" id="signinItem">登入</a> 
            <a class="item hidden" id="signupItem">/註冊</a>
            <a class="item hidden" id="signoutItem" onclick="deleteToken()">/登出系統</a>
          </div>
      </div>
    </div>
  </header>

  <dialog class="popup-wrap" id="signupd">
    <div class="signup">
      <form class="pop-form-wrap" onsubmit="registerUser(event)">
        <div class="pop-form-title">註冊會員帳號</div>
        <span class="close" id="signupclose">
          <img src="/static/image/close.svg" />
        </span>
        <input placeholder="輸入姓名" class="name-r" id="namere" required />
        <input placeholder="輸入電子郵件" class="email-r" id="emailre" type="email"required />
        <input
          placeholder="輸入密碼"
          class="password-r"
          id="passwordre"
          type="password"
          required
        />
        <button class="sign-up" type="submit">
          註冊新帳號
        </button>
        <div class="note" id="notere">
          已經有帳戶了？
          <a class="clickhere" id="signinclick" onclick="signIn()">
            點此登入
          </a>
        </div>
        <div class="result" id="resultre"></div>
      </form>
    </div>
  </dialog>

  <dialog class="popup-wrap" id="signind">
    <div class="signin">
      <form class="pop-form-wrap" onsubmit="userSignIn(event)">
        <div class="pop-form-title">登入會員帳號</div>
        <span class="close" id="signinclose">
          <img src="/static/image/close.svg" />
        </span>
        <input placeholder="輸入電子信箱" class="email" id="email" type="email" required />
        <input
          placeholder="輸入密碼"
          class="password"
          id="password"
          type="password"
          required
        />
        <button class="log-in" type="submit">
          登入帳戶
        </button>
        <div class="note">
          還沒有帳戶？
          <a class="clickhere" id="signupclick" onclick="signUp()">
            點此註冊
          </a>
        </div>
        <div class="result" id="resultsign"></div>
      </form>
    </div>
  </dialog>


  <div class="no-booking-wrap hidden-content" id="no-booking-wrap">
    <div class="itinerary-no-bookingwrap">
      <div class="itinerary-intro" id="itinerary-intro-no-booking"></div>
      <p class="no-booking-text" id="no-booking-text">目前沒有任何待預訂的行程</p>
      
    </div>
  </div>  
  <div class="booking-wrap hidden-content" id="booking-wrap">
    <div class="itinerary-wrap">
      <div class="itinerary-intro" id="itinerary-intro"></div>
      <div class="itinerary-img-text-wrap" id="itinerary-img-text-wrap">
        <img class="itinerary-img" id="itinerary-img">
        <div class="itinerary-text" id="itinerary-text">
        </div>
        <div class="delete-wrap">
          <img class="danger" id="danger" src="/static/image/delete.svg">
        </div>

      </div>
    </div>
    <hr>
    <form id="booking-form">
    <div class="contact-form" id="contact-form">
      <div class="contact-text">您的聯絡資訊</div>
      <div>聯絡姓名：<input class="contact-name" id="contact-name" required></div>
      <div>連絡信箱：<input class="contact-email" id="contact-email" type="email"required></div>
      <div>手機號碼：<input class="contact-phone" id="contact-phone" type="tel" required></div>
      <p class="contact-warn">請保持手機暢通，準時到達，導覽人員將用手機與您聯繫，務必留下正確的聯絡方式。</p>
    </div>

    <hr>
    <div class="card-info" id="card-info">
      <div class="card-text">信用卡付款資訊</div>
      <div class="card-number-group">卡片號碼：<div class="tpfield" id="card-number"></div></div>
      <div class="expiration-date-group">過期時間：<div class="tpfield" id="card-expiration-date"></div></div>
      <div class="ccv-group">驗證密碼： <div class="tpfield" id="card-ccv"></div></div>
    </div>

    <hr>
    <div class="submit-wrap">
      <div class="submit" id="submit-booking">
        <p class="submit-text" id="submit-text"></p>
        <button class="submit-btn" id="submit-btn" type="submit">確認訂購並付款</button>
      </div>
    </div>
  </form>
  </div>


  <footer id="footer">
    <div class="footer-text">COPYRIGHT © 2021 台北一日遊</div>
  </footer>
  <script src="https://js.tappaysdk.com/sdk/tpdirect/v5.18.0"></script>
  <script src="/static/signin.js"></script>
  <script src="/static/booking.js"></script>
  <script> 
//     TPDirect.setupSDK(151766, 'app_vKyZ30uktiHZqvO7mkPQHeRbWLIEkZedy8YuoJJ3IoDOcYsL2OwibQkx6qht', 'sandbox')
//     // Display ccv field
//     let fields = {
//         number: {
//             // css selector
//             element: '#card-number',
//             placeholder: '**** **** **** ****'
//         },
//         expirationDate: {
//             // DOM object
//             element: document.getElementById('card-expiration-date'),
//             placeholder: 'MM / YY'
//         },
//         ccv: {
//             element: '#card-ccv',
//             placeholder: 'ccv'
//         }
//     }    
//     TPDirect.card.setup({
//     fields: fields,
//     styles: {
//         // Style all elements
//         'input': {
//             'color': 'gray'
//         },
//         // Styling ccv field
//         'input.ccv': {
//             // 'font-size': '16px'
//         },
//         // Styling expiration-date field
//         'input.expiration-date': {
//             // 'font-size': '16px'
//         },
//         // Styling card-number field
//         'input.card-number': {
//             // 'font-size': '16px'
//         },
//         // style focus state
//         ':focus': {
//             // 'color': 'black'
//         },
//         // style valid state
//         '.valid': {
//             'color': 'green'
//         },
//         // style invalid state
//         '.invalid': {
//             'color': 'red'
//         },
//         // Media queries
//         // Note that these apply to the iframe, not the root window.
//         '@media screen and (max-width: 400px)': {
//             'input': {
//                 'color': 'orange'
//             }
//         }
//     },
//     // 此設定會顯示卡號輸入正確後，會顯示前六後四碼信用卡卡號
//     isMaskCreditCardNumber: true,
//     maskCreditCardNumberRange: {
//         beginIndex: 6, 
//         endIndex: 11
//     }
// })


// const test=document.getElementById("test");

// function onSubmit() {

//               const contactName=document.getElementById("contact-name").value;
//               const contactEmail=document.getElementById("contact-email").value;
//               const contactPhone=document.getElementById("contact-phone").value;
//             TPDirect.card.getPrime(function (result) {
//                 if (result.status !== 0) {
//                     console.log('getPrime 錯誤')
//                     return
//                 }
//                 alert('getPrime 成功')
//                 var prime = result.card.prime
//                 res = JSON.stringify(result, null, 4)
//                 console.log(res)
//                 console.log(prime)

//                 fetch('/api/orders',{
//                   method:'POST',
//                   headers:{
//                     'Content-Type':'application/json'
//                   },
//                   body:JSON.stringify({
//                             "prime": prime,
//                             "order": {
//                               "price": 2000,
//                               "trip": {
//                                 "attraction": {
//                                   "id": attractionId,
//                                   "name": "平安鐘",
//                                   "address": "臺北市大安區忠孝東路 4 段",
//                                   "image": "https://yourdomain.com/images/attraction/10.jpg"
//                                 },
//                                 "date": "2022-03-31",
//                                 "time": "afternoon"
//                               },
//                               "contact": {
//                                 "name": contactName,
//                                 "email": contactEmail,
//                                 "phone": contactPhone,
//                               }
//                             }
//                           })
//                 })
//                 .then(response =>response.json()
//               .then(data=>{
//                 console.log("this is tappay result:",data)
//               }))
//               .catch(error=>{
//                 console.error('Error',error);
//               });


//             });
//         }


     
  </script>


</body>
</html>